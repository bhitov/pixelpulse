<!doctype html>
<html>
<head>
<meta charset='utf-8'>

<title>Firmware Update</title>

<script src='lib/coffee-script.js'></script>

<script src='lib/jquery-1.7.1.min.js'></script>
<script src='dataserver.coffee' type='text/coffeescript'></script>
<script src='fwupdate.coffee' type='text/coffeescript'></script>
<link href='http://fonts.googleapis.com/css?family=Terminal+Dosis+Light' rel='stylesheet' type='text/css' />
<link href='wizard.css' rel='stylesheet' type='text/css' />

<body>

<style>
#log div{
	-webkit-transition: color 0.5s ease;
	-moz-transition: color 0.5s ease;
	transition: color 0.5s ease;
	margin-bottom: 2px;
}

#log div.run{
	color: orange;
}

#log div.ok{
	color: green;
}

#log div.fail{
	color: red;
}

</style>

<article>
<section id='p1' class='opened'>

	<h1>Firmware update</h1>

	<div id='no-connect' style='display:none;'>
		<h2>Nonolith Connect not found</h2>
		<p>Firmware update requires <a href='http://www.nonolithlabs.com/connect'>Nonolith Connect</a> to be installed and running.</p>
	</div>

	<div id='upload-firmware' style='display:none;'>
		<h2>Choose a firmware</h2>
		<input type="file" id="file" name="file" />

		<p>To flash your own custom firmware, use the cee.json generated by the makefile. Or, [list official firmware images](http://www.nonolithlabs.com/cee/firwmare).</p>
	</div>

	<div id='no-devices' style='display:none;'>
		<h2>No devices</h2>
		<p>Plug in a device to start the firmware update process.</p>

		<p style='margin-top:10px'>If your device's firmware is corrupted and it does not appear here when plugged in, follow the <a href='http://wiki.nonolithlabs.com/wiki/cee/Firmware_Update_Troubleshooting'>recovery instructions</a> to manually start the bootloader.</p>
	</div>

	<div id='multi-device-note' style='display:none;'>
		<p><strong>Note:</strong> Multiple devices attached. Only one is shown.</p>
	</div>

	<div id='device-info' style='display:none'>
		<p style='margin-bottom:2em;'>Installing a firmware takes only a few seconds.</p>
		<table>
			<tr><td>Device</td> <td id='hw-device'></td></tr>
			<tr><td>Serial</td> <td id='serial'></td></tr>
			<tr><td>Current firmware</td> <td id='current-version'></td></tr>
			<tr><td>Ready to install</td> <td id='available-version'>Loading...</td></tr>
		</table>
	</div>

	<nav><button class='btn primary' id='btn_install' style='display:none;'>Install</button></nav>

</section>

<section id='p2'>
<h1>Installing...</h1>

<div id='log'>

</div>

<nav><button class='btn primary' id='btn_done' style='display:none;' onclick="document.location.href='http://apps.nonolithlabs.com/pixelpulse'">Try it out</button></nav>

</section>

</article>

<div id='logo'></div>


</body>
</html>
